<!DOCTYPE html>
{% load staticfiles %}
<html>

<head>
    <meta charset="UTF-8">
    <title>jubeat scores record website</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
    <!--<link rel="stylesheet" href="{% static 'bootstrap-table-master/src/bootstrap-table.css' %}">-->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.css">

    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!--<script src="{% static 'bootstrap-table-master/src/bootstrap-table.js' %}"></script>-->
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>
</head>

<body>
    <div class="row" style="background-color: #C0C0C0">
        <div class="col-md-12">
            <h3 id="title"></h3>
            <h4 id="artist"></h4>
            <h4 id="level"></h4>
            <p></p>
        </div>
    </div>

    <p></p>

    <div>
        <table id="score_table" class="display cell-border">
            <thead style="background-color: #C0C0C0"></thead>
        </table>
    </div>

<script>
    var score_table = $("#score_table");
    sid = parseInt(window.location.href.split("/song/?sid=")[1]);

    $.fn.dataTable.ext.type.order["ranking-asc"] = function (x, y) {
        if (x == "--"){

            return 1;
        }
        else if (y == "--"){
            return -1;
        }
        else{
            return x - y;
        };
    };

    $.fn.dataTable.ext.type.order["ranking-desc"] = function (x, y) {
        if (x == "--"){
            return 1;
        }
        else if (y == "--"){
            return -1;
        }
        else{
            return y - x;
        };
    };

    $.fn.dataTable.ext.type.order["score-asc"] = function (x, y) {
        if (x == "--"){

            return 1;
        }
        else if (y == "--"){
            return -1;
        }
        else{
            return x - y;
        };
    };

    $.fn.dataTable.ext.type.order["score-desc"] = function (x, y) {
        if (x == "--"){
            return 1;
        }
        else if (y == "--"){
            return -1;
        }
        else{
            return y - x;
        };
    };

    $.ajax({
        url: "/song/info/?sid=" + sid,
        type: "get",
        dataType: "json",
        success: function(callback) {
            $("#title").html(callback.Title);
            $("#artist").html(callback.Artist);
            $("#level").html("BASIC Lv " + callback.BAS_Level + "&nbsp&nbsp|&nbsp&nbsp" +
                             "ADVANCED Lv " + callback.ADV_Level + "&nbsp&nbsp|&nbsp&nbsp" +
                             "EXTREME Lv " + callback.EXT_Level);

            score_table.DataTable( {
                ajax: {
                    url: "/song/scores/?sid=" + callback.SID,
                    dataSrc: ""
                },
                columns: [
                    {
                        data: function (value, type, row) {
                            return "<a href=/player/detail/?uid=" + value.UID + ">" + value.PID + "</a>";
                        },
                        title: "Player",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "Play_Count",
                        title: "PC",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "BAS_Score",
                        title: "BASIC",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "BAS_FC",
                        title: "FC",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "BAS_Rank",
                        title: "Ranking",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "ADV_Score",
                        title: "ADVANCED",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "ADV_FC",
                        title: "FC",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "ADV_Rank",
                        title: "Ranking",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "EXT_Score",
                        title: "EXTREME",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "EXT_FC",
                        title: "FC",
                        className: "dt-head-center dt-body-center"
                    },
                    {
                        data: "EXT_Rank",
                        title: "Ranking",
                        className: "dt-head-center dt-body-center"
                    }
                ],
                columnDefs: [
                    { targets: [2, 5, 8], type: "score" },
                    { targets: [4, 7, 10], type: "ranking" },
                    { targets: 3, orderData: [3, 2] },
                    { targets: 6, orderData: [6, 5] },
                    { targets: 9, orderData: [9, 8] }
                ],
                pageLength: 20,
                lengthMenu: [[20, 50, 100, -1], [20, 50, 100, "ALL"]],
                scrollY: 480
            });

            <!--score_table.bootstrapTable( {-->
                <!--url: "/song/scores/?sid=" + callback.SID,-->
                <!--method: "get",-->
                <!--dataType: "json",-->
                <!--columns: [-->
                    <!--{-->
                        <!--field: "PID",-->
                        <!--title: "Player",-->
                        <!--align: "left",-->
                        <!--valign: "middle",-->
                        <!--width: "200",-->
                        <!--formatter: function(value, row, index){-->
                            <!--return "<a href='/player/detail/?uid=" + row.UID + "'>" + row.PID + "</a>";-->
                        <!--}-->
                    <!--},-->
                    <!--{-->
                        <!--field: "Play_Count",-->
                        <!--title: "PC",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "50"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "BAS_Score",-->
                        <!--title: "BASIC",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "80"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "BAS_FC",-->
                        <!--title: "FC",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "50"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "BAS_Rank",-->
                        <!--title: "Ranking",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "50"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "ADV_Score",-->
                        <!--title: "ADVANCED",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "80"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "ADV_FC",-->
                        <!--title: "FC",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "50"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "ADV_Rank",-->
                        <!--title: "Ranking",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "50"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "EXT_Score",-->
                        <!--title: "EXTREME",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "80"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "EXT_FC",-->
                        <!--title: "FC",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "50"-->
                    <!--},-->
                    <!--{-->
                        <!--field: "EXT_Rank",-->
                        <!--title: "Ranking",-->
                        <!--align: "center",-->
                        <!--valign: "middle",-->
                        <!--width: "50"-->
                    <!--}-->
                <!--],-->
                <!--height: "650",-->
                <!--search: true,-->
                <!--formatLoadingMessage: function () {-->
                    <!--return "";-->
                <!--},-->
            <!--});-->
        }
    });


</script>
</body>

</html>
